<!DOCTYPE html>
<html lang="en" ng-app="app">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="robots" value="none">
    <title>Spend Analysis</title>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300' rel='stylesheet' type='text/css'>
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/pure-min.css">
    <link rel="stylesheet" href="style.css">
    <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.21/angular.min.js"></script>

</head>

<body ng-controller="appCtrl" class="ng-cloak">
    <div class="fullscreen">
        <header>
<p>HDC Spend Analysis</p>
        </header>
        <article class="mw plus1">
            <div class="pure-g">
                <div class="pure-u-1 plus1"></div>

                <div class="pure-u-1 plus1">
                    <p class="pull-right">
                        <span ng-show="(data | filter:{Y:Fy} | filter: Srchr ).length < data.length">
{{(data | filter:{Y:Fy} | filter: Srchr ).length}} of </span>{{data.length}} records

                        <a href="" ng-click="[od='I',od1='',od2='']" ng-hide="od1==''"><b>reset sort <i class="fa fa-undo"></i></b></a>
                    </p>





                    <form class="pure-form">
                        <fieldset ng-show="Opt==''">
                            <input ng-model="Srchr" ng-show="Opt==''" placeholder="search" ng-focus="Sopt='on'">

                            <span ng-hide="Srchr==''"> <!-- broken -->
 <select ng-model="sT" ng-options="t for t in dET"></select>
<select id="srch" ng-show="Sopt=='on'">
            <option>Expense Area</option>
            <option>Expense Type</option>
            <option>Supplier</option>
        </select></span>
                            <label>and/or filter by</label>
                            <button ng-click="Opt='x'" class="pure-button" ng-class="{'pure-button-primary': (data | filter:{Y:Fy} ).length < data.length}"><i class="fa fa-calendar"></i>
                            </button>
                        </fieldset>



                        <fieldset ng-show="Opt=='x'">
                            <label>Select a financial year:</label>
                            <a href="" ng-click="[Fy=0,Opt='']" class="pure-button">2010/11</a>
                            <a href="" ng-click="[Fy=1,Opt='']" class="pure-button">2011/12</a>
                            <a href="" ng-click="[Fy=2,Opt='']" class="pure-button">2012/13</a>
                            <a href="" ng-click="[Fy=3,Opt='']" class="pure-button">2013/14</a>
                            <a href="" ng-click="Opt='y'" class="pure-button">More</a>
                            <!-- unhide when you're done here-->
                            <a href="" ng-click="Opt=''" ng-show="Fy==''" class="pure-button"><i class="fa fa-times"></i></a>
                            <a href="" ng-click="[Fy='',Opt='']" ng-hide="Fy==''" class="pure-button"><i class="fa fa-times"></i></a>
                        </fieldset>

                        <fieldset ng-show="Opt=='y'">
                            <label>Create a custom date range:</label>
                            <quick-datepicker ng-model='Sdate' placeholder="from"></quick-datepicker>
                            -
                            <quick-datepicker ng-model='Edate' placeholder="to"></quick-datepicker>
				    <a href="" ng-click="Opt=''"><i class="fa fa-check"></i></a> 
                            <a href="" ng-click="Opt='x'"><i class="fa fa-reply"></i></a> {{Sdate}} | {{Edate}}
                        </fieldset>
                    </form>

                    {{}}
            
                    <table class="pure-table pure-table-striped table-responsive">
                        <thead>
                            <tr>
                                <th>ID
                                    <a href="" ng-click="[od2=od1, od1=od, od='I']" >
                    <i class="fa fa-sort-numeric-asc mute" ng-class="{first: od=='I', second: od1=='I', third: od2=='I'}"></i></a>
                                    <a href="" ng-click="[od2=od1, od1=od, od='-I']">
                    <i class="fa fa-sort-numeric-desc mute" ng-class="{first: od=='-I', second: od1=='-I', third: od2=='-I'}"></i></a>
                                </th>
                                <th>Date
                                    <a href="" ng-click="[od2=od1, od1=od, od='D']">
                    <i class="fa fa-sort-amount-asc mute" ng-class="{first: od=='D', second: od1=='D', third: od2=='D'}"></i></a>
                                    <a href="" ng-click="[od2=od1, od1=od, od='-D']">
                    <i class="fa fa-sort-amount-desc mute" ng-class="{first: od=='-D', second: od1=='-D', third: od2=='-D'}"></i></a>
                                </th>
                                <th>Expense type
                                    <a href="" ng-click="[od2=od1, od1=od, od='A']">
                    <i class="fa fa-sort-alpha-asc mute" ng-class="{first: od=='A', second: od1=='A', third: od2=='A'}"></i></a>
                                    <a href="" ng-click="[od2=od1, od1=od, od='-A']">
                    <i class="fa fa-sort-alpha-desc mute" ng-class="{first: od=='-A', second: od1=='-A', third: od2=='-A'}"></i></a>
                                </th>
                                <th>Expense Area
                                    <a href="" ng-click="[od2=od1, od1=od, od='T']">
                    <i class="fa fa-sort-alpha-asc mute" ng-class="{first: od=='T', second: od1=='T', third: od2=='T'}"></i></a>
                                    <a href="" ng-click="[od2=od1, od1=od, od='-T']">
                    <i class="fa fa-sort-alpha-desc mute" ng-class="{first: od=='-T', second: od1=='-T', third: od2=='-T'}"></i></a>
                                </th>
                                <th>Supplier
                                    <a href="" ng-click="[od2=od1, od1=od, od='S']">
                    <i class="fa fa-sort-alpha-asc mute" ng-class="{first: od=='S', second: od1=='S', third: od2=='S'}"></i></a>
                                    <a href="" ng-click="[od2=od1, od1=od, od='-S']">
                    <i class="fa fa-sort-alpha-desc mute" ng-class="{first: od=='-S', second: od1=='-S', third: od2=='-S'}"></i></a>
                                </th>
                                <th>Value
                                    <a href="" ng-click="[od2=od1, od1=od, od='V']">
                    <i class="fa fa-sort-amount-asc mute" ng-class="{first: od=='V', second: od1=='V', third: od2=='V'}"></i></a>
                                    <a href="" ng-click="[od2=od1, od1=od, od='-V']">
                    <i class="fa fa-sort-amount-desc mute" ng-class="{first: od=='-V', second: od1=='-V', third: od2=='-V'}"></i></a>
                                </th>
                            </tr>
                        </thead>
                        <tbody>



                            <tr ng-repeat="d in data | filter:{Y:Fy} | filter: Srchr | orderBy: [od,od1,od2] | limitTo: long  ">
                                <td>{{d.I+1}}</td>
                                <td>{{d.D *100000 | date:'dd MMM yyyy'}}</td>
                                <td>{{dEA[d.A]}}</td>
                                <td>{{dET[d.T]}}</td>
                                <td>{{dS[d.S]}}</td>
                                <td>{{d.V | currency:"&pound;"}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <a href="" ng-click="long = long+10" class="pure-button" ng-hide="long>=(data | filter:{Y:Fy} | filter: Srchr ).length">show more</a>
                </div>
            </div>
        </article>
        <div class="floor"></div>
    </div>
    <footer>
        <div class="footer center">
            <a href="https://github.com/HartDC">HDC spend analysis</a>
            <br />

        </div>
    </footer>
</body>
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/sugar/1.4.1/sugar.min.js"></script>
<script src="ng-quick-date.js"></script>
<script src="ac.js"></script>
<script src="data1.js"></script>

<script>
    var app = angular.module('app', ['angularCharts', 'ngQuickDate']);
    app.controller('appCtrl', ['$scope', '$filter',
        function (scope, filter) {

            scope.Sdate = "2010-04-01T00:00:00.000Z";
            scope.Edate = "2014-03-31T00:00:00.000Z";
            scope.SD = filter('limitTo')(scope.Sdate, 10);
            scope.ED = filter('limitTo')(scope.Edate, 10);
            scope.Fy = "";
		scope.fy = scope.Fy != "";
            scope.data = dataset;
            scope.dEA = dEA;
            scope.dET = dET;
            scope.dS = dS;
            scope.long = 10;
            scope.od = "I";
            scope.od1 = "";
            scope.od2 = "";
            scope.Opt = "";

}



]);
</script>

</html>
