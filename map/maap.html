<!doctype html>
<html>
<head>
<meta name = "viewport" content = "initial-scale = 1, user-scalable = no">
<title>Maap</title>
<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.3.0/pure-min.css">
<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.0/css/font-awesome.min.css">
<style>ul{list-style-type: none;}.box{text-align: center;padding: 2em;color: #282B36;width: 100%;}.grey{background: #eee;}.bx{text-align: center; text-decoration: none; padding: 2em;color: #282B36;}.grn {color: #7fcba4;}.org{color: #fac090;}.red{color: #C99391;} </style>
<style> #map { position:absolute; top:128px; bottom:0; left:0; width:100%; }</style>
  <link href='http://api.tiles.mapbox.com/mapbox.js/v1.4.0/mapbox.css' rel='stylesheet' />
  <!--[if lte IE 8]>
    <link href='http://api.tiles.mapbox.com/mapbox.js/v1.4.0/mapbox.ie.css' rel='stylesheet'>
  <![endif]-->
<script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>
  <script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
  <script src='http://api.tiles.mapbox.com/mapbox.js/v1.4.0/mapbox.js'></script>		
</head>
<body>
<script src="csv2geojson.js"></script>
<div class="grey box">
<h3>Parking example</h3>
</div>
<div class="box">
<div id='map'></div>
</div>

<script type='text/javascript'>
var map = L.mapbox.map('map', 'examples.map-vyofok3q')
    .setView([51.280206, -0.844687], 11),
    markerLayer = L.mapbox.markerLayer().addTo(map);


markerLayer.eachLayer(function(layer) {

    var content = '<h1>size: ' + layer.title + '<\/h1>' +
        '<h2>population: ' + layer.town + '<\/h2>';
    layer.bindPopup(content);
});


$.ajax({

    url: 'parks.csv',
    success: function csvLoad(csv) {
        markerLayer.setGeoJSON(csv2geojson.csv2geojson(csv));
    }
});
</script>
</body>
</html>
