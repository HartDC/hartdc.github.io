<!DOCTYPE html>
<html lang="en" ng-app="app">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="robots" value="none">
    <title>s106</title>
<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/pure-min.css">
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css">
<style>.gray{color: #888;}</style>
<!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>
<body ng-controller="appCtrl" class="ng-cloak" style="padding:1em;">
    <h1>Work in progress, for testing only</h1>
<p>The purpose of this calculator is to help provide an estimate for the contributions required under s106. The actual requirements for you particular site may vary so it is recommended you seek advice from the planning department.</p>

 <h3 ng-class="{gray: pg!=0}"><b>1. </b>What is on the site now? <a href ng-hide="pg==0" ng-click="pg=0" ng-class="{gray: pg!=0}"><i class="fa fa-chevron-down"></i></a> </h3>
    
            <div class="pure-form pure-form-aligned" ng-show="pg==0">
                    <legend>Dwellings (houses, apartments, etc)</legend>
                    <div class="pure-control-group">
                        <label>1 bedroom units</label>
                        <input type="number" value="" min="0" max="1000" ng-model="c.D1" ng-change="n.D1 = p.D1 - c.D1">
                    </div>
                    <div class="pure-control-group">
                        <label>2 bedroom units</label>
                        <input type="number" value="" min="0" max="1000" ng-model="c.D2" ng-change="n.D2 = p.D2 - c.D2">
                    </div>
                    <div class="pure-control-group">
                        <label>3 bedroom units</label>
                        <input type="number" value="" min="0" max="1000" ng-model="c.D3" ng-change="n.D3 = p.D3 - c.D3">
                    </div>
                    <div class="pure-control-group">
                        <label>4 or more bedroom units</label>
                        <input type="number" value="" min="0" max="1000" ng-model="c.D4" ng-change="n.D4 = p.D4 - c.D4">
                    </div>

                    <legend>Location details</legend>
                    <div class="pure-control-group"><button href ng-click="sm =!sm" class="pure-button"><span ng-show="sm">hide</span><span ng-show="!sm">use</span> map</button>
                        or select parish
                        <select ng-model="parish" ng-options="parish.p as parish.p for parish in parishes"></select> 
                    </div>
			  <div ng-if="sm">
			  <p>Click on the map to mark the location</p>
                    <leaflet center="center" markers="markers" defaults="defaults" height="400px" width="80%" layers="layers" geojson="geojson" id="map" ></leaflet>
                    </div>    
				<legend>Nearest SANG location</legend>
                        <label class="pure-radio">
                            <input type="radio" name="optionsRadios" ng-click="[v.S1 = v.SHM1, v.S2 = v.SHM2, v.S3 = v.SHM3, v.S4 = v.SHM4, v.ST = 'SPA Mitigation - Hawley Meadows']">Hawley Meadow
                        </label>
                        <label class="pure-radio">
                            <input type="radio" name="optionsRadios" ng-click="[v.S1 = v.SHL1, v.S2 = v.SHL2, v.S3 = v.SHL3, v.S4 = v.SHL4, v.ST = 'SPA Mitigation - Hitches Lane']">Hitches Lane
                        </label>

			<div class="pure-control-group">
                        <label>Commercial use classes on site?</label>
                        <input type="checkbox" value="false" ng-model="c.C" ng-click="[c.B1=0,c.B2=0,c.B8=0]">
                    </div>
                
                <div ng-if="c.C">
                    <div class="pure-control-group">
                        <label>Area of B1 development (m2)</label>
                        <input type="number" value="" min="0" max="100000" ng-model="c.B1" ng-change="n.B1 = p.B1 - c.B1">
                    </div>
                    <div class="pure-control-group">
                        <label>Area of B2 development (m2)</label>
                        <input type="number" value="" min="0" max="100000" ng-model="c.B2" ng-change="n.B2 = p.B2 - c.B2">
                    </div>
                    <div class="pure-control-group">
                        <label>Area of B8 development (m2)</label>
                        <input type="number" value="" min="0" max="100000" ng-model="c.B8" ng-change="n.B8 = p.B8 - c.B8">
                    </div>
                </div>
                     <a href class="pure-button pure-button-primary" ng-click="pg=1">Next</a>
        </div>
                   

<h3 ng-class="{gray: pg!=1}"><b>2. </b>What are you proposing will be on the site? <a href ng-hide="pg==1" ng-click="pg=1" ng-class="{gray: pg!=1}"><i class="fa fa-chevron-down"></i></a></h3>
    
            <div class="pure-form pure-form-aligned" ng-show="pg==1">
                    <legend>Dwellings (houses, apartments, etc)</legend>
                    <div class="pure-control-group">
                        <label>1 bedroom units</label>
                        <input type="number" value="" min="0" max="1000" ng-model="p.D1" ng-change="n.D1 = p.D1 - c.D1">
                    </div>
                    <div class="pure-control-group">
                        <label>2 bedroom units</label>
                        <input type="number" value="" min="0" max="1000" ng-model="p.D2" ng-change="n.D2 = p.D2 - c.D2">
                    </div>
                    <div class="pure-control-group">
                        <label>3 bedroom units</label>
                        <input type="number" value="" min="0" max="1000" ng-model="p.D3" ng-change="n.D3 = p.D3 - c.D3">
                    </div>
                    <div class="pure-control-group">
                        <label>4 or more bedroom units</label>
                        <input type="number" value="" min="0" max="1000" ng-model="p.D4" ng-change="n.D4 = p.D4 - c.D4">
                    </div>

			<div class="pure-control-group">
                        <label>Commercial use classes on site?</label>
                        <input type="checkbox" value="false" ng-model="p.C" ng-click="[p.B1=0,p.B2=0,p.B8=0]">
                    </div>
                
                <div ng-if="p.C">
                    <div class="pure-control-group">
                        <label>Area of B1 development (m2)</label>
                        <input type="number" value="" min="0" max="100000" ng-model="p.B1" ng-change="n.B1 = p.B1 - c.B1">
                    </div>
                    <div class="pure-control-group">
                        <label>Area of B2 development (m2)</label>
                        <input type="number" value="" min="0" max="100000" ng-model="p.B2" ng-change="n.B2 = p.B2 - c.B2">
                    </div>
                    <div class="pure-control-group">
                        <label>Area of B8 development (m2)</label>
                        <input type="number" value="" min="0" max="100000" ng-model="p.B8" ng-change="n.B8 = p.B8 - c.B8">
                    </div>
                </div>
                       <a href class="pure-button pure-button-primary" ng-click="pg=2">Next</a>
        </div>
    
    
    
<h3 ng-class="{gray: pg!=2}"><b>3. </b>Results <a href ng-hide="pg==2" ng-click="pg=2" ng-class="{gray: pg!=2}"><i class="fa fa-chevron-down"></i></a></h3>
    
    <div ng-show="pg==2">
<table class="pure-table pure-table-horizontal">
                        <thead>
                            <tr>
					  <th>&nbsp;</th>
                                <th>Contribution
                                    <br />required</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr>
                                <td>District Leisure/Community Development</td>
                                <td>{{ (n.D1*v.DL1) + (n.D2*v.DL2) + (n.D3*v.DL3) + (n.D4*v.DL4) | currency : '&pound; '}}
</td>                           
                            </tr>

                            <tr>
                                <td>Parish Leisure/Community Development</td>
                                <td>{{ ((n.D1*v.PL1) + (n.D2*v.PL2) + (n.D3*v.PL3) + (n.D4*v.PL4) * v.SP.c)| currency : '&pound; '}}
</td>                                
                            </tr>

                            <tr>
                                <td>Education Primary Schools</td>
                                <td>{{(n.D1*v.EP1) + (n.D2*v.EP2) + (n.D3*v.EP3) + (n.D4*v.EP4) | currency : '&pound; '}}
</td>                                
                            </tr>
                            <tr>
                                <td>Education Secondary Schools</td>
                                <td>{{(n.D1*v.ES1) + (n.D2*v.ES2) + (n.D3*v.ES3) + (n.D4*v.ES4) | currency : '&pound; '}}
</td>                                
                            </tr>
				    <tr>
                                <td>NHTS</td>
                                <td>{{((n.D1*v.T1) + (n.D2*v.T2) + (n.D3*v.T3) + (n.D4*v.T4))
+ ((n.B1*v.TB1) + (n.B2*v.TB2) + (n.B8*v.TB8))

 | currency : '&pound; '}}
</td>                                
                            </tr>
				    <tr>
                                <td>{{v.ST}}</td>
                                <td>{{(n.D1*v.S1) + (n.D2*v.S2) + (n.D3*v.S3) + (n.D4*v.S4) | currency : '&pound; '}}
</td>                                
                            </tr>
				    <tr>
                                <td>SAMM</td>
                                <td>{{(n.D1*v.SA1) + (n.D2*v.SA2) + (n.D3*v.SA3) + (n.D4*v.SA4) | currency : '&pound; '}}
</td>                                
                            </tr>
                            <tr class="pure-table-odd">
                                <td>Total</td>
                                <td>{{ Math.max(0,
((n.D1*v.DL1) + (n.D2*v.DL2) + (n.D3*v.DL3) + (n.D4*v.DL4))+
(((n.D1*v.PL1) + (n.D2*v.PL2) + (n.D3*v.PL3) + (n.D4*v.PL4)) * v.SP.l)+
((n.D1*v.EP1) + (n.D2*v.EP2) + (n.D3*v.EP3) + (n.D4*v.EP4))+
((n.D1*v.ES1) + (n.D2*v.ES2) + (n.D3*v.ES3) + (n.D4*v.ES4))+
((n.D1*v.T1) + (n.D2*v.T2) + (n.D3*v.T3) + (n.D4*v.T4))+ 
((n.B1*v.TB1) + (n.B2*v.TB2) + (n.B8*v.TB8))+
((n.D1*v.S1) + (n.D2*v.S2) + (n.D3*v.S3) + (n.D4*v.S4))+
((n.D1*v.SA1) + (n.D2*v.SA2) + (n.D3*v.SA3) + (n.D4*v.SA4))) | currency : '&pound; '}}</td>                                
                            </tr>
                        </tbody>
                    </table>

<a href="http://www3.hants.gov.uk/education/schools/schooldetails.htm?area=hart" target="_blank">check a school area</a>


<p>If affordable housing is required (depends on the size and location of the development): <b>{{(Math.max(0, (n.D1+n.D2+n.D3+n.D4)))*0.4 | number:1 }} units</b></p>
		


            <div ng-if="(p.D1+p.D2+p.D3+p.D4)>0">
                <h4>Residential Summary</h4>
                <table class="pure-table pure-table-horizontal">
                    <thead>
                        <tr>
                            <th>&nbsp;</th>
                            <th>Current</th>
                            <th>Proposed</th>
                            <th>Net change</th>
                            <th>Net change
                                <br />(in people)</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>1 bedroom units</td>
                            <td>{{c.D1}}</td>
                            <td>{{p.D1}}</td>
                            <td>{{n.D1}}</td>
                            <td>{{n.D1*v.PP1 | number : 1}}</td>

                        </tr>

                        <tr>
                            <td>2 bedroom units</td>
                            <td>{{c.D2}}</td>
                            <td>{{p.D2}}</td>
                            <td>{{n.D2}}</td>
                            <td>{{n.D2*v.PP2 | number : 1}}</td>

                        </tr>

                        <tr>
                            <td>3 bedroom units</td>
                            <td>{{c.D3}}</td>
                            <td>{{p.D3}}</td>
                            <td>{{n.D3}}</td>
                            <td>{{n.D3*v.PP3 | number : 1}}</td>

                        </tr>
                        <tr>
                            <td>4+ bedroom units</td>
                            <td>{{c.D4}}</td>
                            <td>{{p.D4}}</td>
                            <td>{{n.D4}}</td>
                            <td>{{n.D4*v.PP4 | number : 1}}</td>

                        </tr>
                        <tr class="pure-table-odd">
                            <td>Total Dwellings</td>
                            <td>{{c.D1+c.D2+c.D3+c.D4}}</td>
                            <td>{{p.D1+p.D2+p.D3+p.D4}}</td>
                            <td>{{n.D1+n.D2+n.D3+n.D4}}</td>
                            <td>{{(n.D1*v.PP1)+(n.D2*v.PP2)+(n.D3*v.PP3)+(n.D4*v.PP4) | number : 1}}</td>

                        </tr>
                    </tbody>
                </table>
            </div>



            <div ng-if="c.C">
                <div ng-if="!p.C">
                    <p>No commercial contributions required</p>
                </div>
            </div>
            <div ng-if="p.C">
                <h4>Commercial Summary</h4>
                <table class="pure-table pure-table-horizontal">
                    <thead>
                        <tr>
                            <th>&nbsp;</th>
                            <th>Current</th>
                            <th>Proposed</th>
                            <th>Net change</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>Area of B1 development (m2)</td>
                            <td>{{c.B1}}</td>
                            <td>{{p.B1}}</td>
                            <td>{{n.B1 | number : 1}}</td>
                        </tr>

                        <tr>
                            <td>Area of B2 development (m2)</td>
                            <td>{{c.B2}}</td>
                            <td>{{p.B2}}</td>
                            <td>{{n.B2 | number : 1}}</td>
                        </tr>

                        <tr>
                            <td>Area of B8 development (m2)</td>
                            <td>{{c.B8}}</td>
                            <td>{{p.B8}}</td>
                            <td>{{n.B8 | number : 1}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>


</div>









</body>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.22/angular.min.js"></script>
<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script src="angular-leaflet-directive.min.js"></script>
<script src="settings.js"></script>
<script src="parishes.js"></script>
<script src="app.js"></script>
</html>